<% content_for :title, "Projects" %>
<% content_for :navigation, true %>

<div class="sm:flex sm:items-center sm:justify-between">
  <div class="page-header">
    <h1 class="page-title">Projects</h1>
    <p class="page-subtitle">Manage secrets for your projects</p>
  </div>
  <div class="mt-4 sm:mt-0">
    <%= link_to new_dashboard_project_path, class: "btn-primary" do %>
      <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
      </svg>
      New Project
    <% end %>
  </div>
</div>

<div class="mt-8 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  <% @projects.each do |project| %>
    <%= link_to dashboard_project_path(project), class: "card-hover p-6 group" do %>
      <div class="flex items-center">
        <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-orange-100 text-orange-600 group-hover:bg-orange-200 transition-colors">
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z" />
          </svg>
        </div>
        <div class="ml-4">
          <h3 class="text-lg font-semibold text-stone-900 group-hover:text-orange-600 transition-colors"><%= project.name %></h3>
          <p class="text-sm text-stone-500"><%= project.secrets.active.count %> secrets</p>
        </div>
      </div>
      <div class="mt-5 flex items-center gap-4 text-sm text-stone-500">
        <span class="flex items-center gap-1.5">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9" />
          </svg>
          <%= project.secret_environments.count %> environments
        </span>
        <span class="flex items-center gap-1.5">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M7.864 4.243A7.5 7.5 0 0119.5 10.5c0 2.92-.556 5.709-1.568 8.268M5.742 6.364A7.465 7.465 0 004.5 10.5a7.464 7.464 0 01-1.15 3.993m1.989 3.559A11.209 11.209 0 008.25 10.5a3.75 3.75 0 117.5 0c0 .527-.021 1.049-.064 1.565M12 10.5a14.94 14.94 0 01-3.6 9.75m6.633-4.596a18.666 18.666 0 01-2.485 5.33" />
          </svg>
          <%= project.access_tokens.active.count %> tokens
        </span>
      </div>
    <% end %>
  <% end %>

  <% if @projects.empty? %>
    <div class="col-span-full">
      <div class="card p-12 text-center">
        <div class="mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-orange-100">
          <svg class="h-8 w-8 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
          </svg>
        </div>
        <h3 class="mt-4 text-lg font-semibold text-stone-900">No projects yet</h3>
        <p class="mt-2 text-sm text-stone-500 max-w-sm mx-auto">Get started by creating your first project to securely manage your secrets.</p>
        <div class="mt-6">
          <%= link_to new_dashboard_project_path, class: "btn-primary" do %>
            <svg class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            Create Your First Project
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
